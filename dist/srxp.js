var exp=function(){var a=function(b,c){return a!==this.constructor?new a(b,c):void this.init(b,c)};return a.prototype.init=function(b,c){c=void 0===c?!1:c;var d=c?a.trim(b):b;this.source=b,this._depth=1,this._stack=[{match:[{text:d,start:0,length:d.length}],text:d}]},a.prototype.matches=function(){return a.pluck(this._stack[this._depth-1].match,"text")},a.prototype.text=function(){return this._stack[this._depth-1].text},a.prototype.match=function(){var b,c,d,e,f,g,h=[];for(f=this.matches(),c=0;c<arguments.length;c++)for(e=a._getRegExp(arguments[c]),b=0;b<f.length;b++)if(g=0,e.global){for(;d=e.exec(f[b]);)if(h=h.concat(a._parseMatch(d)),g++>1e5){console.error("infinity loop");break}}else d=f[b].match(e),h=h.concat(a._parseMatch(d));return this._add({regex:e,match:h}),this},a.prototype.between=function(b,c){var d,e,f,g,h,i=[],j=[],k=0,l=a._getRegExp(b),m=a._getRegExp(c),n=this.matches();for(d=0;d<n.length;d++){for(;g=l.exec(n[d]);)j.push({type:"start",start:g.index+g[0].length,end:0});for(;g=m.exec(n[d]);)j.push({type:"end",start:g.index});for(j.sort(function(a,b){return a.start>b.start}),e=0;e<j.length;e++)if(h=j[e],"start"===h.type)for(f=e+1;f<j.length;f++)if("start"===j[f].type)k++;else if("end"===j[f].type){if(0===k){h.end=j[f].start;break}k--}for(e=0;e<j.length;e++)h=j[e],"start"===h.type&&h.start<h.end&&(g=n[d].substring(h.start,h.end),i.push({text:g,start:h.start,length:g.length}))}return this._add({match:i}),this},a.prototype.replace=function(b){var c,d,e=this.text(),f=this._stack[this._depth-1].match,g=[];for(f.sort(function(a,b){return a.start>b.start}),c=f.length-1;c>=0;c--)"string"==typeof b?(d=b,e=a.stringSplice(e,f[c].start,f[c].length,d)):b instanceof Function?(d=b.call(null,f[c].text,f[c].start,f[c].length),e=a.stringSplice(e,f[c].start,f[c].length,d)):b instanceof Array&&(d=void 0===b[c]?f[c].text:b[c],e=a.stringSplice(e,f[c].start,f[c].length,d)),g.push({text:d,start:f[c].start,length:d.length});return this._add({match:g,text:e}),this},a.prototype.exclude=function(b){var c,d=[],e=a._getRegExp(b),f=this._stack[this._depth-1].match;for(c=0;c<f.length;c++)-1===f[c].text.search(e)&&d.push(f[c]);return this._add({match:d}),this},a.prototype.include=function(b){var c,d=[],e=a._getRegExp(b),f=this._stack[this._depth-1].match;for(c=0;c<f.length;c++)-1!==f[c].text.search(e)&&d.push(f[c]);return this._add({match:d}),this},a.prototype.word=function(){var a=/[\w]+/g;return this.match(a),this},a.prototype.size=function(a,b){a=void 0===a?0:a,b=void 0===b?a:b;var c,d,e=[],f=this._stack[this._depth-1].match;for(c=0;c<f.length;c++)d=f[c].text.length,d>=a&&b>=d&&e.push(f[c]);return this._add({match:e}),this},a.prototype._add=function(a){void 0===a.text&&(a.text=this._stack[this._depth-1].text),this._stack.push(a),this._depth++},a.simplify=function(b){return b=b.replace(/[åäáàãæ]/g,"a"),b=b.replace(/[ÅÄÁÀÃÆ]/g,"A"),b=b.replace(/[éèẽë]/g,"e"),b=b.replace(/[ÉÈẼË]/g,"E"),b=b.replace(/[öõø]/g,"o"),b=b.replace(/[ÖÕØ]/g,"O"),b=b.replace(/[üũ]/g,"u"),b=b.replace(/[ÜŨ]/g,"U"),b=a.trim(b)},a.expandPattern=function(a){return a=a.replace(/\s+/g,"\\s+")},a.escape=function(a){return a=a.replace(/([\(\)\[\]\{\}\\\?\.])/g,"\\$1")},a.trim=function(a){return a=a.replace(/^(\s)*/g,""),a=a.replace(/(\s)*$/g,""),a=a.replace(/(\s){2,}/g," ")},a._getRegExp=function(b,c,d){var e;return c=void 0===c?!0:c,d=void 0===d?!0:d,b instanceof RegExp?e=b:(c&&(b=a.escape(b)),d&&(b=a.expandPattern(b)),e=new RegExp(b,"mg")),e},a._parseMatch=function(a){var b=[];if(1===a.length)b.push({text:a[0],start:a.index,length:a[0].length});else for(j=1;j<a.length;j++)b.push({text:a[j],start:a.index,length:a[j].length});return b},a.pluck=function(a,b){var c,d=[];for(c=0;c<a.length;c++)d.push(a[c][b]);return d},a.stringSplice=function(a,b,c,d){return a.slice(0,b)+d+a.slice(b+c)},a}();"undefined"==typeof exports?srxp=exp:module.exports=exports=exp;